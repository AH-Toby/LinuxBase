# Linux文件目录管理命令

## 一、文件目录管理基础命令

**命令汇总：**

| 命令  | 作用                     |
| ----- | ------------------------ |
| cd    | 变换目录                 |
| tree  | 显示目录结构             |
| ls    | 显示目录下内容及属性     |
| mkdir | 创建目录                 |
| touch | 创建文件或修改文件时间戳 |
| cp    | 复制                     |
| mv    | 移动命令                 |
| rm    | 删除                     |

**Linux 下文件和目录的特点**

Linux 文件 或者 目录 名称最长可以有 256 个字符，以 . 开头的文件为隐藏文件，需要用 -a 参数才能显示

. 代表当前目录

.. 代表上一级目录

### 1.cd:变换目录

```shell
cd /目录位置
```

**cd :** 切换到当前用户的主目录（/home/用户目录）

**cd ~ :** 切换到当前用户的主目录（/home/用户目录）

**cd . :** 保持在当前目录不变

**cd .. :** 切换到上级目录

**cd _ :** 可以在最近两次工作目录间来回切换

### 2.tree:显示目录结构

tree 命令可以以树状图列出文件目录结构

```shell
tree
```

> tree命令需要安装

**tree -d :** 只显示目录

### 3.ls:显示目录下内容及属性信息

ls是英文单词list的简写，其功能为列出目录的内容，是用户最常用的命令之一，类似DOS下的dir命令

| 参数        | 说明                                                         |
| ----------- | :----------------------------------------------------------- |
| -a          | 显示指定目录下的所有子目录和文件，包括.开头的隐藏文件        |
| -l          | 以列表方式显示文件的信息                                     |
| -h          | 与-l一起，以易于阅读的格式输出文件大小                       |
| -t          | 根据最后修改时间排序，默认是以文件名排序的                   |
| -F          | 在条目后加上文件类型的知识符号:<br />*:可执行的普通文件,<br />=:套接字:FIFOS(队列系统),<br />@:符号连接,<br />/:文件夹 |
| -d          | 显示目录本身信息，而不是显示目录内容                         |
| -r          | 逆序排序                                                     |
| -S          | 根据文件大小排序，从大到小排序                               |
| -i          | 显示索引节点信息                                             |
| --full-time | 以完整的时间格式输出                                         |

```shell
ls -lt 按照时间进行排序
ls -lrt 找到最新的文件
ls -d */ 列出当前所有目录
ll -hS ./* 显示出当前目录下所有内容详细，且以KB,MB,GB单位从大到小排序
```

**ls通配符的使用**

| 通配符 | 含义                           |
| ------ | ------------------------------ |
| *      | 代表任意个数个字符             |
| ？     | 代表任意一个字符，至少1个      |
| []     | 表示可以匹配字符组中任意一个   |
| [abc]  | 匹配a,b,c中的任意一个          |
| [a-f]  | 匹配从a到f范围内的任意一个字符 |

### 4.mkdir:创建目录

| 参数                    | 说明                                                         |
| ----------------------- | ------------------------------------------------------------ |
| -m                      | --mode=模式 设置权限模式(类似chmod)                          |
| -p                      | --parents 需要创建目标目录的上层目录，但及时这些目录已经存在也不当作错误处理 |
| mkdir{1..3}/mkdir{a..e} | 加花括号创建连续的目录，用..隔开花括号内可以是连续的数字、连续的字母 |

```shell
mkdir {test,test1,test2} 创建三个文件夹，逗号隔开
mkdir test{1..5} 创建连续的目录
mkdir test test1 创建少量连续目录
```

 ### 5.touch:创建文件或修改文件时间戳

| 参数                  | 说明                                                    |
| --------------------- | ------------------------------------------------------- |
| touch{连续数字或字母} | 创建多个文件序列                                        |
| -c                    | --no-create 不创建任何文件                              |
| -t                    | STAMP 使用\[\[CC]YY]MMDDhhmm[.ss]格式的时间替代当前时间 |
| -r                    | --reference=文件 使用指定文件的时间属性替代当前文件时间 |

```shell
touch -t 06010808 test 修改test文件的时间为6月1号8点8分
touch -r test test1 把test1的时间改成test一样
```

### 6.cp:复制

cp 命令的功能是将给出的 文件 或 目录 复制到另一个 文件 或 目录 中，相当于 DOS 下的 copy 命令

| 参数 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| -r   | 递归复制目录，即复制目录下的所有层级的子目录及文件<br />若给出的源文件是目录文件，则cp将递归复制改目录下的所有子目录和文件，目标文件必须是一个目录名 |
| -d   | 复制的时候保持软连接                                         |
| -p   | --perserve=模式，所有权，时间戳复制文件时保持源文件的权限，时间属性 |
| -i   | --interactive 覆盖前询问                                     |
| -a   | 等于-pdr                                                     |

```shell
cp test /tmp 复制test到/tmp目录下
cp test /tmp/test1 复制test到/tmp目录下并改名test1
```

### 7.mv:移动命令

mv 命令可以用来 移动 文件 或 目录，也可以给 文件或目录重命名

```shell
mv test /tmp 移动test到/tmp目录下
```

**mv -i :** 覆盖文件前提示

### 8.rm:删除命令

| 参数  | 说明                                      |
| ----- | ----------------------------------------- |
| -f    | 强制删除，忽略不存在的文件，不提示确认    |
| -i    | 再删除前需要确认                          |
| -l    | 再删除超过3三个文件或者递归删除前需要确认 |
| -d    | --dir 删除空目录                          |
| -r/-R | --recursive 递归删除目录及其内容          |
| -v    | --verbose 详细精细的步骤                  |

```shell
rm -rfiv test 递归删除test文件并显示进行的步骤且需要确认
```

## 二.查看文件内容

**命令汇总：**

| 命令           | 说明                                                 |
| -------------- | ---------------------------------------------------- |
| cat文件名      | 查看文件内容、创建文件、文件合并、追加文件内容等功能 |
| more文件名     | 分屏显示文件内容                                     |
| grep搜索文本名 | 搜索文本文件内容                                     |

### 1.cat:查看文件

cat命令可以用来查看文件内容、文件合并等功能

cat会一次显示所有的内容，适合查看内容较少的文本文件

**cat -b:** 对非空输出行编号

**cat -n:** 对输出的所有行编号

### 2.more

more 命令可以用于分屏显示文件内容，每次只显示一页内容,适合于查看内容较多的文本文件

**使用more的操作键：**

**空格键:** 显示手册页的下一屏

**Enter键:** 一次滚动手册页的一行

**b键:** 回滚一屏

**q键:** 退出

### 3.grep

**详细见Linux三剑客章节**

Linux 系统中 grep 命令是一种强大的文本搜索工具,grep允许对文本文件进行模式查找，所谓模式查找，又被称为正则表达式。

**grep -n:** 显示匹配行及行号

**grep -v:** 显示不包含文本的所有行（相当于取反）

**grep -i:** 忽略大小写

**常用的两种模式查找**

**^a:** 行首，搜寻以a开头的行

**ke$:** 行尾，搜寻以a开头的行

## 三.其他命令

### 1.echo:打印信息

作用：echo会在终端中显示参数指定的文字，通常会和重定向练习使用

```shell
echo 文字内容
```

```shell
echo 你好
```

### 2.>,>>:重定向

作用：Linux允许将命令执行结果重定向到一个文件中，将本应显示在终端的内容 输出 / 追加到指定文件中

\>:表示输出，会覆盖文件的原有内容

\>\>:表示追加，会将内容追加到已有文件的尾部

```shell
echo 你好 > 1.txt
```

```shell
tree >> 1.txt
```

### 3.|:管道

作用：Linux 允许将 一个命令的输出可以通过管道做为另一个命令的输入，可以理解为现实中的管子，管子的一头塞东西，另外一头取出来，这里|的左右分别为两端，左端塞东西（写），右端取东西（读）

```shell
tree | grep "templates" -n
```

### 4.find:查找文件

**find：**命令功能非常强大，通常用来在特定的目录下 搜索符合条件的文件

```shell
find [路径] -name "\*.py"
```

查找指定路径下扩展名是 **.py**的文件，包括子目录

- 如果省略路径，表示在当前文件夹下查找
- 之前学习的通配符，在使用 find 命令时同时可用

```shell
find ./爬虫1 -name "*.py"
```

### 5.ln:链接

**软链接:** 用通俗的方式讲类似于Windows 下的快捷方式，它实际上是一个特殊的文件。在符号连接中，文件实际上是一个文本文件，其中包含的有另一文件的位置信息。

**硬链接:** 硬连接指通过索引节点来进行连接。在Linux的文件系统中，保存在磁盘分区中的文件不管是什么类型都给它分配一个编号，称为索引节点号(Inode Index)。在Linux中，多个文件名指向同一索引节点是存在的，一般这种连接就是硬连接。硬连接的作用是允许一个文件拥有多个有效路径名，这样用户就可以建立硬连接到重要文件，以防止 “误删” 的功能。其原因如上所述，因为对应该目录的索引节点有一个以上的连接。只删除一个连接并不影响索引节点本身和其它的连接，只有当最后一个连接被删除后，文件的数据块及目录的连接才会被释放。也就是说，文件真正删除的条件是与之相关的所有硬连接文件均被删除。

```shell
ln [-s] 文件名	链接名
```

> **注意：**
>
> 没有-s选项建立的是一个硬链接文件
>
> 两个文件占用相同大小的硬盘空间，工作中几乎不会建立文件的硬链接
>
> 源文件要使用绝对路径，不能使用相对路径，这样可以方便移动链接文件后，仍然能够正常使用

```shell
touch f1  # 创建一个测试文件
ln f1 f2  # 创建f1的一个硬链接文件f2
ln -s f1 f3  # 创建f1的一个软链接文件f3
```

从上面的结果中可以看出，硬连接文件 `f2` 与原文件 `f1` 的 `inode` 节点相同，均为9797648，然而符号连接文件的 inode 节点不同。

```shell
# 写入内容
echo "i am f1 file" >> f1
# 查看内容
cat f1
cat f2
cat f3
# 删除f1
rm f1
# 查询f2,f3
cat f2
cat f3
```

当删除原始文件 `f1` 后，硬连接 `f2` 不受影响，但是符号连接 `f1` 文件无效。

**综上：**硬链接类似于文件复制，软连接类似于为文件创建快捷方式。

### 6.tar:打包/解包

tar 是 Linux 中最常用的备份工具，此命令可以把一系列文件打包到 一个大文件中，也可以把一个打包的大文件恢复成一系列文件

```shell
tar [option]... [file]...
		参数				 目录文件
```

**参数说明：**

| 参数           | 说明                                                        |
| -------------- | ----------------------------------------------------------- |
| -c             | --create 建立新的备份文件                                   |
| -C             | --directory= 切换到指定的目录                               |
| -f             | --file= 指定备份文件（注意：-f 是最后的参数，只能接文件名） |
| -r             | --append 新增文件到已存在的备份文件的结尾部分               |
| -u             | --update 仅置换较备份文件内的文件更新的文件                 |
| -v             | --verbose 显示指令执行过程                                  |
| -x             | -extract或--get 从备份文件中还原文件                        |
| -z             | -gzip或--ungzip 通过gzip指令处理备份文件                    |
| --remove-files | 文件加入备份文件后删除                                      |
| --help         | 在线帮助                                                    |
| --version      | 显示版本信息                                                |

**打包：**

```shell
tar -cvf  文件名.tar  被打包的文件/路径
```

```shell
tar -cvf ln_test.tar ln_test/
```

**解包：**

```shell
tar -xvf 打包文件.tar
```

```shell
tar -xvf ln_test.tar
```

**gzip:**

tar和gzip命令结合可以实现文件打包压缩

* tar值负责打包文件但不压缩
* 用gzip压缩tar打包后的文件，其扩展名一般为xxx.tar.gz

在linux中，最常用的压缩格式就是xxx.tar.gz

在 tar 命令中有一个选项 **-z**可以调用 gzip，从而可以方便的实现压缩和解压缩的功能

**打包压缩：**

```shell
tar -zcvf  文件名.tar.gz  被打包的文件/路径
```

```shell
tar -zcvf ln_test.tar.gz ln_test
```

**解压缩：**

```shell
tar -zxvf 打包文件.tar.gz
```

```shell
tar -zxvf ln_test.tar.gz
```

**解压缩到指定路径**

```shell
tar -zxvf 打包文件.tar.gz -C目标路径
```

```shell
tar -zxvf ln_test.tar.gz -C ln_test/
```

> 注意：
>
> 在使用**-C**时要解压缩的目录必须存在
