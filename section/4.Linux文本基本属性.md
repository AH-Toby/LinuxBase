# Linux文本基本属性

[文章引用自菜鸟教程](https://www.runoob.com/linux/linux-file-attr-permission.html)

## 一.文件权限

Linux 系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。

为了保护系统的安全性，Linux 系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。

在 Linux 中我们通常使用以下两个命令来修改文件或目录的所属用户与权限：

- chown (change owner) ： 修改所属用户与组。
- chmod (change mode) ： 修改用户的权限。

在 Linux 中我们可以使用 **ll** 或者 **ls –l** 命令来显示一个文件的属性以及文件所属的用户和组，如：

```shell
python@ubuntu:/$ ll
总用量 216
drwxr-xr-x   2 root root  4096 2月  27  2019 bin/
drwxr-xr-x   3 root root  4096 2月  27  2019 boot/
drwxrwxr-x   2 root root  4096 5月  16  2016 cdrom/
-rw-r--r--   1 root root     0 12月 19  2017 Desktop
......
```

实例中，**bin** 文件的第一个属性用 **d** 表示。**d** 在 Linux 中代表该文件是一个目录文件。

在 Linux 中第一个字符代表这个文件是目录、文件或链接文件等等。

- 当为 **d** 则是目录
- 当为 **-** 则是文件；
- 若是 **l** 则表示为链接文档(link file)；
- 若是 **b** 则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；
- 若是 **c** 则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。

接下来的字符中，以三个为一组，且均为 **rwx** 的三个参数的组合。其中， **r** 代表可读(read)、 **w** 代表可写(write)、 **x** 代表可执行(execute)。 要注意的是，这三个权限的位置不会改变，如果没有权限，就会出现减号 **-** 而已。![image-20230116174357760](https://raw.githubusercontent.com/AH-Toby/ImageStorage/master/ImageStorageimage-20230116174357760.png)

每个文件的属性由左边第一部分的 10 个字符来确定（如下图）。![363003_1227493859FdXT](https://www.runoob.com/wp-content/uploads/2014/06/363003_1227493859FdXT.png)

从左至右用 **0-9** 这些数字来表示。

第 **0** 位确定文件类型，第 **1-3** 位确定属主（该文件的所有者）拥有该文件的权限。

第4-6位确定属组（所有者的同组用户）拥有该文件的权限，第7-9位确定其他用户拥有该文件的权限。

其中，第 **1、4、7** 位表示读权限，如果用 **r** 字符表示，则有读权限，如果用 **-** 字符表示，则没有读权限；

第 **2、5、8** 位表示写权限，如果用 **w** 字符表示，则有写权限，如果用 **-** 字符表示没有写权限；第 **3、6、9** 位表示可执行权限，如果用 **x** 字符表示，则有执行权限，如果用 **-** 字符表示，则没有执行权限。

## 二.Linux文件属主和属组

### 1.基本概念

**用户** 是 Linux 系统工作中重要的一环，用户管理包括 **用户** 与 **权限** 管理

在 Linux 系统中，不论是由本机或是远程登录系统，每个系统都**必须拥有一个账号**，并且**对于不同的系统资源拥有不同的使用权限**

### 2.文件属组关系

对于文件来说，它都有一个特定的所有者，也就是对该文件具有所有权的用户。

同时，在Linux系统中，用户是按组分类的，一个用户属于一个或多个组。

文件所有者以外的用户又可以分为文件所属组的同组用户和其他用户。

因此，Linux系统按文件所有者、文件所有者同组用户和其他用户来规定了不同的文件访问权限。

```shell
python@ubuntu:/$ ls -l
总用量 64
drwxr-xr-x 2 root  root  4096 Feb 15 14:46 cron
drwxr-xr-x 3 mysql mysql 4096 Apr 21  2014 mysql
……
```

在以上实例中，mysql 文件是一个目录文件，属主和属组都为 mysql，属主有可读、可写、可执行的权限；与属主同组的其他用户有可读和可执行的权限；其他用户也有可读和可执行的权限。

> 注意：
>
> 对于 root 用户来说，一般情况下，文件的权限对其不起作用。

## 三.更改文件属性

| 命令  | 作用                                 |
| ----- | ------------------------------------ |
| chgrp | 更改文件属组                         |
| chown | 更改文件属主，也可以同时更改文件属组 |
| chmod | 更改文件9个属性                      |

> 注意以上命令都要管理员权限来设置

### 1.chgrp

**语法：**

```shell
chgrp [-R] 属组名 文件名
```

**参数选项：**

**-R:** 递归更改文件属组，就是在更改某个目录文件的属组时，如果加上-R的参数，那么该目录下的所有文件的属组都会更改。

### 2.chown

**语法：**

```shell
chown [–R] 属主名 文件名
chown [-R] 属主名：属组名 文件名
```

**参数选项：**

**-R:** 递归更改文件属组，就是在更改某个目录文件的属组时，如果加上-R的参数，那么该目录下的所有文件的属组都会更改。

### 3.chmod

Linux文件属性有两种设置方法，一种是数字，一种是符号。

Linux 文件的基本权限就有九个，分别是 **owner/group/others(拥有者/组/其他)** 三种身份各有自己的 **read/write/execute** 权限。

各权限的分数对照表如下：

| 权限 | 英文   | 缩写 | 数字代号 |
| ---- | ------ | ---- | -------- |
| 读   | read   | r    | 4        |
| 写   | write  | w    | 2        |
| 执行 | excute | x    | 1        |

**语法：**

```shell
 chmod [-R] xyz 文件或目录
```

**选项与参数：**

- **xyz** : 就是刚刚提到的数字类型的权限属性，为 **rwx** 属性数值的相加。
- **-R** : 进行递归(recursive)的持续变更，以及连同次目录下的所有文件都会变更

#### 3.1符号类型改变文件权限

还有一个改变权限的方法，从之前的介绍中我们可以发现，基本上就九个权限分别是：

- user：用户
- group：组
- others：其他

那么我们就可以使用 **u, g, o** 来代表三种身份的权限。

此外， **a** 则代表 **all**，即全部的身份。读写的权限可以写成 **r, w, x**，也就是可以使用下表的方式来看：

<table>
  <tr>
    <td rowspan="4"><strong>chmod</strong></td>
    <td><strong>u</strong></td>
    <td><strong>+(加入)</strong></td>
    <td><strong>r</strong></td>
    <td rowspan="4"><strong>文件和目录</strong></td>
  </tr>
  <tr>
    <td><strong>g</strong></td>
    <td><strong>-(除去)</strong></td>
    <td><strong>w</strong></td>
  </tr>
  <tr>
    <td><strong>o</strong></td>
    <td rowspan="2"><strong>=(设定)</strong></td>
    <td rowspan="2"><strong>x</strong></td>
  </tr>
  <tr>
    <td><strong>a</strong></td>
  </tr>
</table>

如果我们需要将文件权限设置为 **-rwxr-xr--** ，可以使用 **chmod u=rwx,g=rx,o=r 文件名** 来设定:

```shell
#  touch test1    // 创建 test1 文件
# ls -al test1    // 查看 test1 默认权限
-rw-r--r-- 1 root root 0 Nov 15 10:32 test1
# chmod u=rwx,g=rx,o=r  test1    // 修改 test1 权限
# ls -al test1
-rwxr-xr-- 1 root root 0 Nov 15 10:32 test1
```

而如果是要将权限去掉而不改变其他已存在的权限呢？例如要拿掉全部人的可执行权限，则：

```shell
#  chmod  a-x test1
# ls -al test1
-rw-r--r-- 1 root root 0 Nov 15 10:32 test1
```
